{% load i18n %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadowmere</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KQ4KMVJEXY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'G-KQ4KMVJEXY');
    </script>

    <script src="https://cdn.websitepolicies.io/lib/cookieconsent/1.0.3/cookieconsent.min.js" defer></script>
    <script>window.addEventListener("load", function () {
        window.wpcc.init({
            "border": "thin",
            "corners": "small",
            "colors": {
                "popup": {"background": "#f6f6f6", "text": "#000000", "border": "#555555"},
                "button": {"background": "#555555", "text": "#ffffff"}
            },
            "position": "bottom"
        })
    });</script>
</head>
<body class="w3-blue-grey w3-container">
<a style="position: absolute;top: 0;left: 0;" href="https://github.com/jadolg/shadowmere"><img loading="lazy"
                                                                                               width="149" height="149"
                                                                                               src="https://github.blog/wp-content/uploads/2008/12/forkme_left_darkblue_121621.png?resize=149%2C149"
                                                                                               class="attachment-full size-full"
                                                                                               alt="Fork me on GitHub"
                                                                                               data-recalc-dims="1"></a>
<div class="w3-margin">
    <div class="w3-quarter w3-margin w3-center">
        <a href="/">
            <h2>Shadowmere</h2>
        </a>
        <p>{% translate "A list of Shadowsocks proxies" %}</p>
        <p>
            <b>{% translate "Disclaimer:" %}</b> {% translate "This website is only a list of tunnels collected all around internet. We do NOT provide or maintain any of these tunnels." %}
            <span class="w3-red">{% translate "Use them at your own risk." %}</span></p>
        <a href="https://skyrim.fandom.com/wiki/Shadowmere">
            <img class="w3-image w3-round"
                 src="https://images.uesp.net/thumb/b/be/SR-creature-Shadowmere.jpg/600px-SR-creature-Shadowmere.jpg">
        </a>
        <p><b>{% translate "How do I use this?:" %}</b>
            {% blocktranslate %}Go give <a href="https://shadowsocks.org/">shadowsocks.org</a> a quick look for information.
                <a href="https://shadowsocks.org/en/download/clients.html">Here</a> is a list of clients for several
                platforms, but my favorite is <a href="https://getoutline.org/">Outline</a> for any platform and
                <a href="https://play.google.com/store/apps/details?id=com.github.shadowsocks">shadowsocks</a> for
                Android</p>
            {% endblocktranslate %}
        <p><b>{% translate "Online:" %}</b> {{ proxy_list|length }} {% if location_country_code != "" %}
            <img class="w3-margin" title="{{ country_code.location_country_code }}" width="70px" height="30px"
                         src="https://cdn.jsdelivr.net/npm/country-flag-emoji-json@2.0.0/dist/images/{{ location_country_code }}.svg">
        {% endif %}</p>
        {% if proxy_list|length > 0 %}
            <p><b>{% translate "Last check:" %}</b> {{ proxy_list.0.last_checked }} UTC</p>
        {% endif %}
        <a class="w3-button" href="/">
            <img title="world" width="30px" height="20px"
                 src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/ef/International_Flag_of_Planet_Earth.svg/1280px-International_Flag_of_Planet_Earth.svg.png">
        </a>
        {% for country_code in country_codes %}
            {% if country_code.location_country_code != "" %}
                <a class="w3-button" href="/?location_country_code={{ country_code.location_country_code }}">
                    <img title="{{ country_code.location_country_code }}" width="30px" height="20px"
                         src="http://img.geonames.org/flags/x/{{ country_code.location_country_code |lower }}.gif">
                </a>
            {% endif %}
        {% endfor %}

    </div>
    {% if proxy_list %}
        <ul class="w3-ul w3-margin w3-card-4 w3-twothird">
            {% for proxy in page_obj %}
                <li class="w3-bar {% if forloop.counter != 20 %} w3-bottombar {% endif %} w3-display-container w3-row">
                    <div class="w3-bar-item w3-display-topleft">
                        <span><img title="{{ proxy.location }}" width="30px" height="20px" alt="{{ proxy.location }}"
                                   src="http://img.geonames.org/flags/x/{{ proxy.location_country_code |lower }}.gif"/></span>
                        <span class="w3-tag w3-margin-left">{% widthratio proxy.times_check_succeeded proxy.times_checked 100 %}%</span>
                    </div>
                    <div class="w3-bar-item w3-display-bottomleft">
                        <div class="w3-hide" style="word-wrap: anywhere;max-width: 900px"
                             id="proxy{{ forloop.counter }}">{{ proxy.url }}#{{ proxy.location|urlencode }}</div>
                        <div><b>{{ proxy.ip_address }}</b></div>
                    </div>
                    <div class="w3-bar-item w3-right">
                        <div class="w3-bar-item w3-button w3-blue-greyt  w3-large"
                             onclick=copyToClipboard("proxy{{ forloop.counter }}")>&#9986;
                        </div>
                        <div class="w3-bar-item w3-button w3-blue-grey w3-margin-left w3-large"
                             onclick="document.getElementById('proxyqr{{ forloop.counter }}').style.display='block'" )>
                            &#9633;
                        </div>
                        <a href="/{{ proxy.id }}/config">
                            <div class="w3-bar-item w3-button w3-blue-grey w3-margin-left w3-large">&#x2193;
                            </div>
                        </a>
                    </div>

                    <!-- The Modal -->
                    <div id="proxyqr{{ forloop.counter }}" class="w3-modal">
                        <div class="w3-modal-content w3-center">
                            <div class="w3-container">
                                <span onclick="document.getElementById('proxyqr{{ forloop.counter }}').style.display='none'"
                                      class="w3-button w3-display-topright w3-blue-grey">&times;</span>
                                <img class="w3-image" loading="lazy" src="/{{ proxy.id }}/qr" alt="qr"/>
                            </div>
                        </div>
                    </div>
                </li>
            {% endfor %}
        </ul>
        <div class="w3-center">
            <div class="pagination w3-bar">
                <span class="step-links">
                    {% if page_obj.has_previous %}
                        <a class="w3-button"
                           href="?page={{ page_obj.previous_page_number }}&location_country_code={{ location_country_code }}">&#10094;</a>
                    {% endif %}

                    <span class="w3-button">
                        {{ page_obj.number }} {% translate "of" %} {{ page_obj.paginator.num_pages }}
                    </span>

                    {% if page_obj.has_next %}
                        <a class="w3-button"
                           href="?page={{ page_obj.next_page_number }}&location_country_code={{ location_country_code }}">&#10095;</a>
                    {% endif %}
                </span>
            </div>
        </div>
    {% else %}
        <h2 class="w3-center">{% translate "No active proxies found" %}</h2>
    {% endif %}
</div>
</body>
<script>
    function copyToClipboard(elementId) {
        var copyText = document.getElementById(elementId);
        navigator.clipboard.writeText(copyText.innerText);
    }
</script>
</html>
